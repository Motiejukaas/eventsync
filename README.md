# EventSync

EventSync is a Spring Boot REST API for managing events and collecting user feedback with AI-powered sentiment analysis and summarization.  
It integrates with **OpenAI** (deprecated) and **Hugging Face** APIs to analyze and summarize event feedback automatically.

---
## Deployment
Currently available at: https://event-sync-server-140350866035.europe-north2.run.app

## Features
- Create, list, and delete events
- Submit feedback to events
- AI-generated sentiment analysis and summaries
- Sentiment breakdown (positive, neutral, negative counts and percentages)
- OpenAPI (Swagger) documentation
- Async event-driven summary generation
- In-memory H2 database
- Dockerized for deployment to Google Cloud Run

---

## Tech Stack

**Backend**
- Java 25
- Spring Boot 3.5
- Spring Data JPA + Hibernate
- Spring Validation
- Springdoc OpenAPI (Swagger UI)
- H2 database


**External APIs**
- [OpenAI API](https://platform.openai.com/docs/) – for feedback summarization (unused)
- [Hugging Face Inference API](https://huggingface.co/docs/api-inference/) – for sentiment classification and feedback summarization

**Build & Deployment**
- Maven
- Docker
- Google Cloud Run
- Google Secret Manager (for API keys)

---

## API Endpoints

### Events

#### Create Event
`POST /events`

Request body:

```json
{
  "title": "Ceramics Workshop",
  "description": "Beginner pottery class on Nov 5th, 18:00."
}
```

#### List All Events

`GET /events`

Returns all events with sentiment counts and summaries.

#### Delete Event

`DELETE /events/{eventId}`

Deletes an event by ID.

#### Submit Feedback

`POST /events/{eventId}/feedback`

Request body:

```json
{
  "message": "Loved the class!"
}
```

Automatically performs sentiment analysis and publishes feedback creation event which may trigger an AI feedbacks summary update.

#### Get Sentiment Breakdown

`GET /events/{eventId}/summary`

Returns sentiment breakdown (positive, neutral, negative counts and percentages).

#### Get AI-Generated Summary

`GET /events/{eventId}/summary/ai`

Returns a summary of event feedbacks generated by an LLM.

### Feedback
#### Get Feedbacks by Event ID

`GET /feedbacks/{eventId}`

Returns all the event's feedbacks.

## Local Development
### Prerequisites

- Java 25
- Maven
- Docker (optional)

`mvn spring-boot:run`

The app starts on: http://localhost:8080

## Docker
### Building and running your application

When you're ready, start your application by running:
`docker compose up --build`.

Your application will be available at http://localhost:8080.

### Deploying your application to the cloud

First, build your image `docker build -t event-sync .`.
If your cloud uses a different CPU architecture than your development
machine (e.g., you are on a Mac M1 and your cloud provider is amd64),
you'll want to build the image for that platform, e.g.:
`docker build --platform=linux/amd64 -t event-sync .`.

Then, push it to your registry, e.g. `docker push myregistry.com/event-sync`.

Consult Docker's [getting started](https://docs.docker.com/go/get-started-sharing/)
docs for more detail on building and pushing.

## Environment Variables

These must be set:

OPENAI_API_KEY	OpenAI API key  
HF_TOKEN Hugging Face API token

## Swagger & Testing

Access Swagger UI
http://localhost:8080/swagger-ui.html

Once deployed, Swagger UI is accessible at:
https://event-sync-server-140350866035.europe-north2.run.app/swagger-ui.html

## Development Notes

H2 DB is configured in-memory
It resets each time the app restarts.

For persistent storage, replace with a real database (e.g. PostgreSQL).
