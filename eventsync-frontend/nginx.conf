server {
    listen ${PORT};
    server_name _;
    root /usr/share/nginx/html;
    index index.html;

    # Serve files directly if they exist, otherwise fallback to index.html
    location / {
        try_files $uri $uri/ /index.html;
    }

    # Note: In Cloud Run we call the backend via a public URL baked into the bundle (VITE_API_URL)
    # so we intentionally do NOT proxy /api here to avoid DNS resolution issues at startup.

    # Small gzip tuning
    gzip on;
    gzip_types text/plain application/javascript text/css application/json;
}
